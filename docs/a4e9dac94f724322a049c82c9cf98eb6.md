# Adding Markdown Support and Toast UI Editor in OpenSilver

OpenSilver 애플리케이션에서 마크다운 렌더링과 Toast UI Editor를 구현하는 방법을 설명합니다. 이 가이드는 최소한의 구성으로 문서 편집 시스템을 구축하는 방법을 다룹니다.

## Table of Contents
1. Overview
2. Markdown Rendering Implementation
3. Toast UI Editor Integration
4. Code Examples

## 1. Overview
OpenSilver에서 마크다운 문서를 표시하고 편집하기 위한 두 가지 핵심 기능을 구현합니다:
- Markdig를 사용한 마크다운 렌더링
- Toast UI Editor를 통한 마크다운 편집기 통합

## 2. Markdown Rendering Implementation
마크다운을 HTML로 변환하기 위한 기본적인 구현을 제공합니다. Markdig 라이브러리를 사용하여 간단하고 효율적인 변환을 수행합니다.

### 기본 구성
```csharp
using Markdig;
using System.IO;

internal class MarkdownHelper
{
    public string ConvertMarkdown(string content)
    {
        var pipeline = new MarkdownPipelineBuilder()
            .UseAdvancedExtensions()
            .Build();

        return Markdown.ToHtml(content ?? string.Empty, pipeline);
    }
}
```

### 사용 예시
```csharp
string Content = @"## 소개
OpenSilver는 최신 웹 기술을 활용한 크로스 플랫폼 프레임워크입니다.

### 주요 특징
- .NET 기반의 강력한 개발 환경
- XAML을 통한 직관적인 UI 구현
- JavaScript 상호운용성";

var markdown = new MarkdownHelper().ConvertMarkdown(Content);
MarkdownContent = <div class='markdown-body'>{markdown}</div>
```

## 3. Toast UI Editor Integration
Toast UI Editor를 OpenSilver 애플리케이션에 통합하는 방법을 설명합니다.

### 필수 리소스
```html
<link rel='stylesheet' href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
<script src='https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js'></script>
```

### JavaScript 구현
```javascript
// 에디터 초기화
function initEditor() {
    const editor = new toastui.Editor({
        el: document.getElementById('editor'),
        height: '100%',
        initialEditType: 'markdown',
        previewStyle: 'vertical'
    });

    window.editor = editor;
}

// 컨텐츠 설정
function setEditorContent(content) {
    const decodedContent = decodeBase64(content);
    window.editor?.setMarkdown(decodedContent);
}

// 컨텐츠 가져오기
function getEditorContent() {
    return window.editor ? window.editor.getMarkdown() : null;
}

// Base64 디코딩
function decodeBase64(content) {
    try {
        return decodeURIComponent(escape(atob(content)));
    } catch (error) {
        console.error("Base64 디코딩 오류:", error);
        return "";
    }
}
```

## 4. Code Examples

### XAML에서 에디터 표시
```xml
<htmls:HtmlPresenter x:Name="ToastEditor" Html="{Binding EditorHtml}"/>
```

### C#에서 에디터 초기화
```csharp
using OpenSilver;

// HTML 설정 및 에디터 초기화
EditorHtml = "<div id='editor'></div>";
await Task.Delay(500);
Interop.ExecuteJavaScriptAsync("initEditor();");

// 콘텐츠 설정
var base64Content = Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(CurrentContent));
Interop.ExecuteJavaScriptAsync($"setEditorContent('{base64Content}');");
```

### 에디터 콘텐츠 가져오기
```csharp
var content = Interop.ExecuteJavaScript("getEditorContent();");
if (content == null) throw new Exception("Editor content is null.");
var decodedContent = System.Text.Encoding.UTF8.GetString(System.Text.Encoding.UTF8.GetBytes(content.ToString()));
```

이 구현으로 OpenSilver 애플리케이션에서 기본적인 마크다운 렌더링과 편집 기능을 사용할 수 있습니다. 추가적인 기능이나 커스터마이징이 필요한 경우, 각 컴포넌트의 공식 문서를 참조하시기 바랍니다.